<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-learn/withdrawals" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Withdrawals | Monomer</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/learn/withdrawals"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Withdrawals | Monomer"><meta data-rh="true" name="description" content="Monomer supports ETH withdrawals through the Optimism Portal L1 contract. This is the canonical way to move assets from an OP Stack rollup chain to Ethereum."><meta data-rh="true" property="og:description" content="Monomer supports ETH withdrawals through the Optimism Portal L1 contract. This is the canonical way to move assets from an OP Stack rollup chain to Ethereum."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/learn/withdrawals"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/learn/withdrawals" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/learn/withdrawals" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.487b78fe.css">
<script src="/assets/js/runtime~main.172962a0.js" defer="defer"></script>
<script src="/assets/js/main.0b11f2b2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_T0wU" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Monomer Docs</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Overview</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/category/learn">Learn</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/category/build">Build</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/polymerdao/monomer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Oq79"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_j0am colorModeToggle_pQG7"><button class="clean-btn toggleButton_HhDK toggleButtonDisabled_t_Dj" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_r_7u"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wq9A"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_HdKT"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_YgcF"><div class="docsWrapper_YoPw"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_jP4D" type="button"></button><div class="docRoot_sK1T"><aside class="theme-doc-sidebar-container docSidebarContainer_gddz"><div class="sidebarViewport_uOLj"><div class="sidebar_U5iQ"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_W_k7"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/overview">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/category/learn">Learn</a><button aria-label="Collapse sidebar category &#x27;Learn&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/blocks">Block Transitions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/rollup-module">x/rollup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/deposits">Deposits</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/learn/withdrawals">Withdrawals</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/l2-mempool">L2 Transactions</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/build">Build</a><button aria-label="Expand sidebar category &#x27;Build&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer__UZ5"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Xvm4"><div class="docItemContainer_OFSB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_aCog" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_w_z0"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/category/learn"><span itemprop="name">Learn</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Withdrawals</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_noSi theme-doc-toc-mobile tocMobile_iRnd"><button type="button" class="clean-btn tocCollapsibleButton_YkeA">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Withdrawals</h1>
<p>Monomer supports ETH withdrawals through the Optimism Portal L1 contract. This is the canonical way to move assets from an OP Stack rollup chain to Ethereum.</p>
<div class="theme-admonition theme-admonition-note admonition_S1JT alert alert--secondary"><div class="admonitionHeading_Fw82"><span class="admonitionIcon_O9X1"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_cp_p"><p>For UX purposes, exiting an ORU via the canonical bridge is impractical and slow. But the exit mechanism must be available for security reasons.</p></div></div>
<p>The withdrawal transaction flow is illustrated below. The lifecycle moves in the opposite direction than the Deposits flow - starting at the Cosmos-SDK appchain, processed by the Monomer <code>x/rollup</code> module and then Monomer&#x27;s builder, and finally into the OP-Stack components on L1.</p>
<p>Again, this document focuses on Monomer specific modifications. Full documentation for the withdrawal flow is available in the <a href="https://specs.optimism.io/protocol/withdrawals.html" target="_blank" rel="noopener noreferrer">OP Stack specs</a>.</p>
<img src="/img/withdrawals-light.png" alt="Withdrawal workflow" class="themedComponent_HEmy themedComponent--light_E6Lp"><img src="/img/withdrawals-dark.png" alt="Withdrawal workflow" class="themedComponent_HEmy themedComponent--dark_HFhH">
<h2 class="anchor anchorWithStickyNavbar_n_3r" id="initiating-withdrawals">Initiating Withdrawals<a class="hash-link" aria-label="Direct link to Initiating Withdrawals" title="Direct link to Initiating Withdrawals" href="/learn/withdrawals#initiating-withdrawals">​</a></h2>
<p>The withdrawal process begins with an L2 user submitting a withdrawal transaction to the Cosmos-SDK appchain, with the same data used to initiate a withdrawal on a standard OP Stack. These messages are interpreted by both the <code>x/rollup</code> module of the appchain, and the Monomer block builder, which writes necessary data to the <a href="/learn/blocks#state">EVM sidecar</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_n_3r" id="l2-appchain">L2 Appchain<a class="hash-link" aria-label="Direct link to L2 Appchain" title="Direct link to L2 Appchain" href="/learn/withdrawals#l2-appchain">​</a></h3>
<p>On the L2 appchain, via custom message types and handlers from the <code>x/rollup</code> module, a withdrawal transaction results in a simple ETH burn on the L2, along with emission of corresponding <code>withdrawal_initiated</code> and <code>burn_eth</code> events.</p>
<h3 class="anchor anchorWithStickyNavbar_n_3r" id="monomer-block-builder">Monomer Block Builder<a class="hash-link" aria-label="Direct link to Monomer Block Builder" title="Direct link to Monomer Block Builder" href="/learn/withdrawals#monomer-block-builder">​</a></h3>
<p>After each L2 appchain block, the Monomer block builder listens for <code>withdrawal_initiated</code> events from successful L2 transactions.
For each observed event, the builder makes a corresponding <code>L2ToL1MessagePasserExecuter</code> contract call into the internal EVM sidecar state to store the withdrawal transaction for use when proving the withdrawal on L1.</p>
<h2 class="anchor anchorWithStickyNavbar_n_3r" id="proving-and-finalizing-withdrawals">Proving and Finalizing Withdrawals<a class="hash-link" aria-label="Direct link to Proving and Finalizing Withdrawals" title="Direct link to Proving and Finalizing Withdrawals" href="/learn/withdrawals#proving-and-finalizing-withdrawals">​</a></h2>
<p>The next step for a user is to obtain a proof of the withdrawal transaction.</p>
<p>For compatibility with the withdrawals process, Monomer uses the state root of its EVM sidecar state as the L2 state updated by the <code>op-proposer</code>. Monomer exposes the standard ethereum <code>GetProof</code> API endpoint for obtaining a merkle proof of withdrawal transactions registered in the EVM sidecar state.</p>
<p>With the withdrawal proof data, the user is now back to the L1 side of the OP Stack. The proof is submitted, and the withdrawal can be finalized after the rollup&#x27;s challenge period.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/polymerdao/monomer/tree/main/docs/docs/learn/withdrawals.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_W0pT" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_pD_Y"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/learn/deposits"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Deposits</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/learn/l2-mempool"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">L2 Transactions</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_YORa thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/learn/withdrawals#initiating-withdrawals">Initiating Withdrawals</a><ul><li><a class="table-of-contents__link toc-highlight" href="/learn/withdrawals#l2-appchain">L2 Appchain</a></li><li><a class="table-of-contents__link toc-highlight" href="/learn/withdrawals#monomer-block-builder">Monomer Block Builder</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/learn/withdrawals#proving-and-finalizing-withdrawals">Proving and Finalizing Withdrawals</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/polymerdao/monomer" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Oq79"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://polymerlabs.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Polymer Labs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Oq79"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://nethermind.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Nethermind<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Oq79"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/UR5ahaXwHH" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Oq79"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
</body>
</html>